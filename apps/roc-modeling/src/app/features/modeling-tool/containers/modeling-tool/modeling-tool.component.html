<ng-container *ngIf="{
    roiModelDto: roiModelDto$ |async,
    roiModelCount: roiModelCount$ | async,
    userModelDto: userModelDto$ |async,
    accordionState: accordionState$ | async,
    userProfile: userProfile$ | async,
    isOffCanvasOpen: isOffCanvasOpen$ | async
  } as data">


  <section class="flex">


    <!-- ACCORDION -->
    <aside class="flex-none shadow-md w-96">

      <roc-modeling-tool-controls [roiModelDto]="data.roiModelDto"
                                  [userModelDto]="data.userModelDto"
                                  [accordionState]="data.accordionState"
                                  (onCurrentInformationSubmitted)="onCurrentInformationSubmitted($event)"
                                  (onCareerGoalSubmitted)="onCareerGoalSubmitted($event)"
                                  (onEducationCostSubmitted)="onEducationCostSubmitted($event)"
                                  (onEducationFinancingSubmitted)="onEducationFinancingSubmitted($event)"
                                  (onCreateNewCollection)="onCreateNewCollection()"
                                  (onResetAll)="onResetAll()"
                                  (onPanelChange)="onPanelChange($event)"></roc-modeling-tool-controls>

    </aside>



    <!-- AGGREGATE NAME && MODELS CTA -->
    <section class="flex-auto ml-4">


      <!-- AGGREGATE -->
      <roc-aggregate-summary class="pt-3"
                             [roiModelDto]="data.roiModelDto"
                             [roiModelCount]="data.roiModelCount"
                             (onRename)="onRenameAggregate($event)"
                             (onShowSavedModels)="onShowSaved(data.isOffCanvasOpen)"></roc-aggregate-summary>



      <!-- MODEL SUMMARY && GRAPH -->
      <div class="px-5 py-4 mr-4 bg-white shadow-md place-items-center">

        <roc-roi-model-call-to-actions [roiModelDto]="data.roiModelDto"
                                       (onClone)="onClone($event)"
                                       (onRename)="onRenameModel($event)"></roc-roi-model-call-to-actions>


        <roc-user-profile-summary [roiModelDto]="data.roiModelDto"></roc-user-profile-summary>


        <roc-lifetime-earnings-graph></roc-lifetime-earnings-graph>


      </div>

    </section>

  </section>

</ng-container>
